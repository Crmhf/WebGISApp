var VSHADER_SOURCE="attribute vec4 a_Position;\nattribute vec2 a_TexCoord;\nvarying vec2 v_TexCoord;\nvoid main() {\n  gl_Position = a_Position;\n  v_TexCoord = a_TexCoord;\n}\n";var FSHADER_SOURCE="#ifdef GL_ES\nprecision mediump float;\n#endif\nuniform sampler2D u_Sampler0;\nuniform sampler2D u_Sampler1;\nvarying vec2 v_TexCoord;\nvoid main() {\n  vec4 color0 = texture2D(u_Sampler0, v_TexCoord);\n  vec4 color1 = texture2D(u_Sampler1, v_TexCoord);\n  gl_FragColor = color0 * color1;\n}\n";function main(){var a=document.getElementById("webgl");var b=getWebGLContext(a);if(!b){console.log("Failed to get the rendering context for WebGL");return}if(!initShaders(b,VSHADER_SOURCE,FSHADER_SOURCE)){console.log("Failed to intialize shaders.");return}var c=initVertexBuffers(b);if(c<0){console.log("Failed to set the vertex information");return}b.clearColor(0,0,0,1);if(!initTextures(b,c)){console.log("Failed to intialize the texture.");return}}function initVertexBuffers(f){var e=new Float32Array([-0.5,0.5,0,1,-0.5,-0.5,0,0,0.5,0.5,1,1,0.5,-0.5,1,0]);var g=4;var c=f.createBuffer();if(!c){console.log("Failed to create the buffer object");return -1}f.bindBuffer(f.ARRAY_BUFFER,c);f.bufferData(f.ARRAY_BUFFER,e,f.STATIC_DRAW);var a=e.BYTES_PER_ELEMENT;var d=f.getAttribLocation(f.program,"a_Position");if(d<0){console.log("Failed to get the storage location of a_Position");return -1}f.vertexAttribPointer(d,2,f.FLOAT,false,a*4,0);f.enableVertexAttribArray(d);var b=f.getAttribLocation(f.program,"a_TexCoord");if(b<0){console.log("Failed to get the storage location of a_TexCoord");return -1}f.vertexAttribPointer(b,2,f.FLOAT,false,a*4,a*2);f.enableVertexAttribArray(b);return g}function initTextures(g,h){var d=g.createTexture();var b=g.createTexture();if(!d||!b){console.log("Failed to create the texture object");return false}var f=g.getUniformLocation(g.program,"u_Sampler0");var e=g.getUniformLocation(g.program,"u_Sampler1");if(!f||!e){console.log("Failed to get the storage location of u_Sampler");return false}var c=new Image();var a=new Image();if(!c||!a){console.log("Failed to create the image object");return false}c.onload=function(){loadTexture(g,h,d,f,c,0)};a.onload=function(){loadTexture(g,h,b,e,a,1)};c.src="../resources/sky.jpg";a.src="../resources/circle.gif";return true}var g_texUnit0=false,g_texUnit1=false;function loadTexture(e,f,b,d,c,a){e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,1);if(a==0){e.activeTexture(e.TEXTURE0);g_texUnit0=true}else{e.activeTexture(e.TEXTURE1);g_texUnit1=true}e.bindTexture(e.TEXTURE_2D,b);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR);e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,c);e.uniform1i(d,a);e.clear(e.COLOR_BUFFER_BIT);if(g_texUnit0&&g_texUnit1){e.drawArrays(e.TRIANGLE_STRIP,0,f)}};